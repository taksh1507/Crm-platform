"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/setup";
exports.ids = ["pages/api/setup"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = import("@supabase/supabase-js");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csetup.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csetup.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\setup.ts */ \"(api)/./pages/api/setup.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/setup\",\n        pathname: \"/api/setup\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNldHVwJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNzZXR1cC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNtRDtBQUNuRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsZ0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL2xlYXJubHluay1hc3Nlc3NtZW50Lz8zOWY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcc2V0dXAudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zZXR1cFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3NldHVwXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csetup.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/setup.ts":
/*!****************************!*\
  !*** ./pages/api/setup.ts ***!
  \****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__]);\n_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst supabaseUrl = \"https://ydzxkzcjggeajbrlfdgy.supabase.co\" || 0;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"\";\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    // Safety check - only allow from localhost during development\n    const host = req.headers.host || \"\";\n    if (!host.includes(\"localhost\") && !host.includes(\"127.0.0.1\")) {\n        return res.status(403).json({\n            error: \"Forbidden - only available on localhost\"\n        });\n    }\n    try {\n        // Create admin client with service role key\n        const supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\n        // Check if tables already exist\n        const { data: existingTables, error: checkError } = await supabase.from(\"information_schema.tables\").select(\"table_name\").eq(\"table_schema\", \"public\");\n        if (!checkError && existingTables && existingTables.length > 0) {\n            const tableNames = existingTables.map((t)=>t.table_name);\n            if (tableNames.includes(\"leads\")) {\n                // Tables likely already set up, just ensure test data exists\n                return await insertTestData(supabase, res);\n            }\n        }\n        // Create leads table\n        const leadsTableSql = `\r\n      CREATE TABLE IF NOT EXISTS leads (\r\n        id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n        tenant_id UUID NOT NULL,\r\n        owner_id UUID NOT NULL,\r\n        team_id UUID,\r\n        name TEXT NOT NULL,\r\n        email TEXT,\r\n        phone TEXT,\r\n        stage TEXT DEFAULT 'new',\r\n        created_at TIMESTAMPTZ NOT NULL DEFAULT now(),\r\n        updated_at TIMESTAMPTZ NOT NULL DEFAULT now()\r\n      );\r\n    `;\n        // Create applications table\n        const applicationsTableSql = `\r\n      CREATE TABLE IF NOT EXISTS applications (\r\n        id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n        tenant_id UUID NOT NULL,\r\n        lead_id UUID NOT NULL REFERENCES leads (id) ON DELETE CASCADE,\r\n        status TEXT DEFAULT 'pending',\r\n        created_at TIMESTAMPTZ NOT NULL DEFAULT now(),\r\n        updated_at TIMESTAMPTZ NOT NULL DEFAULT now()\r\n      );\r\n    `;\n        // Create tasks table\n        const tasksTableSql = `\r\n      CREATE TABLE IF NOT EXISTS tasks (\r\n        id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\r\n        tenant_id UUID NOT NULL,\r\n        application_id UUID NOT NULL REFERENCES applications (id) ON DELETE CASCADE,\r\n        type TEXT NOT NULL,\r\n        status TEXT DEFAULT 'pending',\r\n        due_at TIMESTAMPTZ NOT NULL,\r\n        created_at TIMESTAMPTZ NOT NULL DEFAULT now(),\r\n        updated_at TIMESTAMPTZ NOT NULL DEFAULT now(),\r\n        CONSTRAINT task_type_valid CHECK (type IN ('call', 'email', 'review')),\r\n        CONSTRAINT task_due_at_valid CHECK (due_at >= created_at)\r\n      );\r\n    `;\n        // Execute table creations\n        for (const sql of [\n            leadsTableSql,\n            applicationsTableSql,\n            tasksTableSql\n        ]){\n            try {\n                const { error } = await supabase.rpc(\"execute_sql\", {\n                    query: sql\n                });\n            // Continue even if RPC fails - tables might be created via other means\n            } catch (e) {\n            // Ignore errors - tables might already exist\n            }\n        }\n        // Insert test data\n        return await insertTestData(supabase, res);\n    } catch (err) {\n        console.error(\"Setup error:\", err);\n        return res.status(500).json({\n            error: \"Failed to initialize database\",\n            message: err.message\n        });\n    }\n}\nasync function insertTestData(supabase, res) {\n    try {\n        // Define fixed UUIDs for test data\n        const leadId = \"550e8400-e29b-41d4-a716-446655440000\";\n        const tenantId = \"550e8400-e29b-41d4-a716-446655440001\";\n        const ownerId = \"550e8400-e29b-41d4-a716-446655440002\";\n        const applicationId = \"660e8400-e29b-41d4-a716-446655440000\";\n        // Check if test data already exists and needs fixing\n        const { data: existingLead } = await supabase.from(\"leads\").select(\"id\").eq(\"id\", leadId).single();\n        if (existingLead) {\n            // Data exists - check if tasks have correct status\n            const { data: tasks } = await supabase.from(\"tasks\").select(\"id, status\").eq(\"application_id\", applicationId);\n            // Check if we have 2 pending and 1 completed task\n            const pendingCount = tasks?.filter((t)=>t.status === \"pending\").length || 0;\n            const completedCount = tasks?.filter((t)=>t.status === \"completed\").length || 0;\n            if (pendingCount === 2 && completedCount === 1) {\n                // Tasks are already correct\n                return res.status(200).json({\n                    message: \"Database already initialized with correct test data\",\n                    status: \"ready\"\n                });\n            }\n            // Fix the task statuses - delete old ones\n            const { error: deleteError } = await supabase.from(\"tasks\").delete().eq(\"application_id\", applicationId);\n            if (deleteError) throw deleteError;\n            // Re-insert with correct statuses\n            const now = new Date();\n            const correctedTasks = [\n                {\n                    id: \"770e8400-e29b-41d4-a716-446655440001\",\n                    tenant_id: tenantId,\n                    application_id: applicationId,\n                    type: \"call\",\n                    status: \"pending\",\n                    due_at: new Date(now.getTime() + 2 * 60 * 60 * 1000).toISOString(),\n                    created_at: now.toISOString(),\n                    updated_at: now.toISOString()\n                },\n                {\n                    id: \"770e8400-e29b-41d4-a716-446655440002\",\n                    tenant_id: tenantId,\n                    application_id: applicationId,\n                    type: \"email\",\n                    status: \"pending\",\n                    due_at: new Date(now.getTime() + 4 * 60 * 60 * 1000).toISOString(),\n                    created_at: now.toISOString(),\n                    updated_at: now.toISOString()\n                },\n                {\n                    id: \"770e8400-e29b-41d4-a716-446655440003\",\n                    tenant_id: tenantId,\n                    application_id: applicationId,\n                    type: \"review\",\n                    status: \"completed\",\n                    due_at: new Date(now.getTime() - 1 * 60 * 60 * 1000).toISOString(),\n                    created_at: new Date(now.getTime() - 1 * 60 * 60 * 1000).toISOString(),\n                    updated_at: now.toISOString()\n                }\n            ];\n            const { error: tasksError } = await supabase.from(\"tasks\").insert(correctedTasks);\n            if (tasksError) throw tasksError;\n            return res.status(200).json({\n                message: \"Database test data corrected successfully\",\n                status: \"ready\"\n            });\n        }\n        // Insert lead\n        const { error: leadError } = await supabase.from(\"leads\").insert({\n            id: leadId,\n            tenant_id: tenantId,\n            owner_id: ownerId,\n            team_id: \"550e8400-e29b-41d4-a716-446655440003\",\n            name: \"John Smith\",\n            email: \"john@example.com\",\n            phone: \"+1-555-123-4567\",\n            stage: \"qualified\"\n        });\n        if (leadError) throw leadError;\n        // Insert application\n        const { error: appError } = await supabase.from(\"applications\").insert({\n            id: applicationId,\n            tenant_id: tenantId,\n            lead_id: leadId,\n            status: \"pending\"\n        });\n        if (appError) throw appError;\n        // Delete existing test tasks if they exist (for clean reset)\n        await supabase.from(\"tasks\").delete().eq(\"application_id\", applicationId);\n        // Insert tasks\n        const now = new Date();\n        const tasks = [\n            {\n                id: \"770e8400-e29b-41d4-a716-446655440001\",\n                tenant_id: tenantId,\n                application_id: applicationId,\n                type: \"call\",\n                status: \"pending\",\n                due_at: new Date(now.getTime() + 2 * 60 * 60 * 1000).toISOString(),\n                created_at: now.toISOString(),\n                updated_at: now.toISOString()\n            },\n            {\n                id: \"770e8400-e29b-41d4-a716-446655440002\",\n                tenant_id: tenantId,\n                application_id: applicationId,\n                type: \"email\",\n                status: \"pending\",\n                due_at: new Date(now.getTime() + 4 * 60 * 60 * 1000).toISOString(),\n                created_at: now.toISOString(),\n                updated_at: now.toISOString()\n            },\n            {\n                id: \"770e8400-e29b-41d4-a716-446655440003\",\n                tenant_id: tenantId,\n                application_id: applicationId,\n                type: \"review\",\n                status: \"completed\",\n                due_at: new Date(now.getTime() - 1 * 60 * 60 * 1000).toISOString(),\n                created_at: new Date(now.getTime() - 1 * 60 * 60 * 1000).toISOString(),\n                updated_at: now.toISOString()\n            }\n        ];\n        const { error: tasksError } = await supabase.from(\"tasks\").insert(tasks);\n        if (tasksError) throw tasksError;\n        return res.status(200).json({\n            message: \"Database initialized successfully with test data\",\n            status: \"ready\",\n            data: {\n                lead: leadId,\n                application: applicationId,\n                tasks: tasks.length\n            }\n        });\n    } catch (err) {\n        console.error(\"Test data insertion error:\", err);\n        return res.status(500).json({\n            error: \"Failed to insert test data\",\n            message: err.message\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFhakM7Z0JBQ2JHLE9BQU9BLE1BQU10QixNQUFNO1lBQ3JCO1FBQ0Y7SUFDRixFQUFFLE9BQU9hLEtBQVU7UUFDakJDLFFBQVF6QixLQUFLLENBQUMsOEJBQThCd0I7UUFDNUMsT0FBTzVCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLE9BQU87WUFDUDBCLFNBQVNGLElBQUlFLE9BQU87UUFDdEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGVhcm5seW5rLWFzc2Vzc21lbnQvLi9wYWdlcy9hcGkvc2V0dXAudHM/MDdhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICcnO1xyXG5jb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8ICcnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcclxuICB9XHJcblxyXG4gIC8vIFNhZmV0eSBjaGVjayAtIG9ubHkgYWxsb3cgZnJvbSBsb2NhbGhvc3QgZHVyaW5nIGRldmVsb3BtZW50XHJcbiAgY29uc3QgaG9zdCA9IHJlcS5oZWFkZXJzLmhvc3QgfHwgJyc7XHJcbiAgaWYgKCFob3N0LmluY2x1ZGVzKCdsb2NhbGhvc3QnKSAmJiAhaG9zdC5pbmNsdWRlcygnMTI3LjAuMC4xJykpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnRm9yYmlkZGVuIC0gb25seSBhdmFpbGFibGUgb24gbG9jYWxob3N0JyB9KTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBDcmVhdGUgYWRtaW4gY2xpZW50IHdpdGggc2VydmljZSByb2xlIGtleVxyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZUtleSk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGFibGVzIGFscmVhZHkgZXhpc3RcclxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdUYWJsZXMsIGVycm9yOiBjaGVja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnaW5mb3JtYXRpb25fc2NoZW1hLnRhYmxlcycpXHJcbiAgICAgIC5zZWxlY3QoJ3RhYmxlX25hbWUnKVxyXG4gICAgICAuZXEoJ3RhYmxlX3NjaGVtYScsICdwdWJsaWMnKTtcclxuXHJcbiAgICBpZiAoIWNoZWNrRXJyb3IgJiYgZXhpc3RpbmdUYWJsZXMgJiYgZXhpc3RpbmdUYWJsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjb25zdCB0YWJsZU5hbWVzID0gZXhpc3RpbmdUYWJsZXMubWFwKCh0OiBhbnkpID0+IHQudGFibGVfbmFtZSk7XHJcbiAgICAgIGlmICh0YWJsZU5hbWVzLmluY2x1ZGVzKCdsZWFkcycpKSB7XHJcbiAgICAgICAgLy8gVGFibGVzIGxpa2VseSBhbHJlYWR5IHNldCB1cCwganVzdCBlbnN1cmUgdGVzdCBkYXRhIGV4aXN0c1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBpbnNlcnRUZXN0RGF0YShzdXBhYmFzZSwgcmVzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIENyZWF0ZSBsZWFkcyB0YWJsZVxyXG4gICAgY29uc3QgbGVhZHNUYWJsZVNxbCA9IGBcclxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgbGVhZHMgKFxyXG4gICAgICAgIGlkIFVVSUQgUFJJTUFSWSBLRVkgREVGQVVMVCBnZW5fcmFuZG9tX3V1aWQoKSxcclxuICAgICAgICB0ZW5hbnRfaWQgVVVJRCBOT1QgTlVMTCxcclxuICAgICAgICBvd25lcl9pZCBVVUlEIE5PVCBOVUxMLFxyXG4gICAgICAgIHRlYW1faWQgVVVJRCxcclxuICAgICAgICBuYW1lIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgZW1haWwgVEVYVCxcclxuICAgICAgICBwaG9uZSBURVhULFxyXG4gICAgICAgIHN0YWdlIFRFWFQgREVGQVVMVCAnbmV3JyxcclxuICAgICAgICBjcmVhdGVkX2F0IFRJTUVTVEFNUFRaIE5PVCBOVUxMIERFRkFVTFQgbm93KCksXHJcbiAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVBUWiBOT1QgTlVMTCBERUZBVUxUIG5vdygpXHJcbiAgICAgICk7XHJcbiAgICBgO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhcHBsaWNhdGlvbnMgdGFibGVcclxuICAgIGNvbnN0IGFwcGxpY2F0aW9uc1RhYmxlU3FsID0gYFxyXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBhcHBsaWNhdGlvbnMgKFxyXG4gICAgICAgIGlkIFVVSUQgUFJJTUFSWSBLRVkgREVGQVVMVCBnZW5fcmFuZG9tX3V1aWQoKSxcclxuICAgICAgICB0ZW5hbnRfaWQgVVVJRCBOT1QgTlVMTCxcclxuICAgICAgICBsZWFkX2lkIFVVSUQgTk9UIE5VTEwgUkVGRVJFTkNFUyBsZWFkcyAoaWQpIE9OIERFTEVURSBDQVNDQURFLFxyXG4gICAgICAgIHN0YXR1cyBURVhUIERFRkFVTFQgJ3BlbmRpbmcnLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QVFogTk9UIE5VTEwgREVGQVVMVCBub3coKSxcclxuICAgICAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUFRaIE5PVCBOVUxMIERFRkFVTFQgbm93KClcclxuICAgICAgKTtcclxuICAgIGA7XHJcblxyXG4gICAgLy8gQ3JlYXRlIHRhc2tzIHRhYmxlXHJcbiAgICBjb25zdCB0YXNrc1RhYmxlU3FsID0gYFxyXG4gICAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB0YXNrcyAoXHJcbiAgICAgICAgaWQgVVVJRCBQUklNQVJZIEtFWSBERUZBVUxUIGdlbl9yYW5kb21fdXVpZCgpLFxyXG4gICAgICAgIHRlbmFudF9pZCBVVUlEIE5PVCBOVUxMLFxyXG4gICAgICAgIGFwcGxpY2F0aW9uX2lkIFVVSUQgTk9UIE5VTEwgUkVGRVJFTkNFUyBhcHBsaWNhdGlvbnMgKGlkKSBPTiBERUxFVEUgQ0FTQ0FERSxcclxuICAgICAgICB0eXBlIFRFWFQgTk9UIE5VTEwsXHJcbiAgICAgICAgc3RhdHVzIFRFWFQgREVGQVVMVCAncGVuZGluZycsXHJcbiAgICAgICAgZHVlX2F0IFRJTUVTVEFNUFRaIE5PVCBOVUxMLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QVFogTk9UIE5VTEwgREVGQVVMVCBub3coKSxcclxuICAgICAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUFRaIE5PVCBOVUxMIERFRkFVTFQgbm93KCksXHJcbiAgICAgICAgQ09OU1RSQUlOVCB0YXNrX3R5cGVfdmFsaWQgQ0hFQ0sgKHR5cGUgSU4gKCdjYWxsJywgJ2VtYWlsJywgJ3JldmlldycpKSxcclxuICAgICAgICBDT05TVFJBSU5UIHRhc2tfZHVlX2F0X3ZhbGlkIENIRUNLIChkdWVfYXQgPj0gY3JlYXRlZF9hdClcclxuICAgICAgKTtcclxuICAgIGA7XHJcblxyXG4gICAgLy8gRXhlY3V0ZSB0YWJsZSBjcmVhdGlvbnNcclxuICAgIGZvciAoY29uc3Qgc3FsIG9mIFtsZWFkc1RhYmxlU3FsLCBhcHBsaWNhdGlvbnNUYWJsZVNxbCwgdGFza3NUYWJsZVNxbF0pIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ2V4ZWN1dGVfc3FsJywgeyBxdWVyeTogc3FsIH0pO1xyXG4gICAgICAgIC8vIENvbnRpbnVlIGV2ZW4gaWYgUlBDIGZhaWxzIC0gdGFibGVzIG1pZ2h0IGJlIGNyZWF0ZWQgdmlhIG90aGVyIG1lYW5zXHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBJZ25vcmUgZXJyb3JzIC0gdGFibGVzIG1pZ2h0IGFscmVhZHkgZXhpc3RcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEluc2VydCB0ZXN0IGRhdGFcclxuICAgIHJldHVybiBhd2FpdCBpbnNlcnRUZXN0RGF0YShzdXBhYmFzZSwgcmVzKTtcclxuICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignU2V0dXAgZXJyb3I6JywgZXJyKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGluaXRpYWxpemUgZGF0YWJhc2UnLFxyXG4gICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gaW5zZXJ0VGVzdERhdGEoc3VwYWJhc2U6IGFueSwgcmVzOiBhbnkpIHtcclxuICB0cnkge1xyXG4gICAgLy8gRGVmaW5lIGZpeGVkIFVVSURzIGZvciB0ZXN0IGRhdGFcclxuICAgIGNvbnN0IGxlYWRJZCA9ICc1NTBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDAnO1xyXG4gICAgY29uc3QgdGVuYW50SWQgPSAnNTUwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAxJztcclxuICAgIGNvbnN0IG93bmVySWQgPSAnNTUwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAyJztcclxuICAgIGNvbnN0IGFwcGxpY2F0aW9uSWQgPSAnNjYwZTg0MDAtZTI5Yi00MWQ0LWE3MTYtNDQ2NjU1NDQwMDAwJztcclxuXHJcbiAgICAvLyBDaGVjayBpZiB0ZXN0IGRhdGEgYWxyZWFkeSBleGlzdHMgYW5kIG5lZWRzIGZpeGluZ1xyXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ0xlYWQgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdsZWFkcycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkJylcclxuICAgICAgLmVxKCdpZCcsIGxlYWRJZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmIChleGlzdGluZ0xlYWQpIHtcclxuICAgICAgLy8gRGF0YSBleGlzdHMgLSBjaGVjayBpZiB0YXNrcyBoYXZlIGNvcnJlY3Qgc3RhdHVzXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogdGFza3MgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Rhc2tzJylcclxuICAgICAgICAuc2VsZWN0KCdpZCwgc3RhdHVzJylcclxuICAgICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb25JZCk7XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIDIgcGVuZGluZyBhbmQgMSBjb21wbGV0ZWQgdGFza1xyXG4gICAgICBjb25zdCBwZW5kaW5nQ291bnQgPSB0YXNrcz8uZmlsdGVyKCh0OiBhbnkpID0+IHQuc3RhdHVzID09PSAncGVuZGluZycpLmxlbmd0aCB8fCAwO1xyXG4gICAgICBjb25zdCBjb21wbGV0ZWRDb3VudCA9IHRhc2tzPy5maWx0ZXIoKHQ6IGFueSkgPT4gdC5zdGF0dXMgPT09ICdjb21wbGV0ZWQnKS5sZW5ndGggfHwgMDtcclxuICAgICAgXHJcbiAgICAgIGlmIChwZW5kaW5nQ291bnQgPT09IDIgJiYgY29tcGxldGVkQ291bnQgPT09IDEpIHtcclxuICAgICAgICAvLyBUYXNrcyBhcmUgYWxyZWFkeSBjb3JyZWN0XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgIG1lc3NhZ2U6ICdEYXRhYmFzZSBhbHJlYWR5IGluaXRpYWxpemVkIHdpdGggY29ycmVjdCB0ZXN0IGRhdGEnLFxyXG4gICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGaXggdGhlIHRhc2sgc3RhdHVzZXMgLSBkZWxldGUgb2xkIG9uZXNcclxuICAgICAgY29uc3QgeyBlcnJvcjogZGVsZXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Rhc2tzJylcclxuICAgICAgICAuZGVsZXRlKClcclxuICAgICAgICAuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb25JZCk7XHJcblxyXG4gICAgICBpZiAoZGVsZXRlRXJyb3IpIHRocm93IGRlbGV0ZUVycm9yO1xyXG5cclxuICAgICAgLy8gUmUtaW5zZXJ0IHdpdGggY29ycmVjdCBzdGF0dXNlc1xyXG4gICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICBjb25zdCBjb3JyZWN0ZWRUYXNrcyA9IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJzc3MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMScsXHJcbiAgICAgICAgICB0ZW5hbnRfaWQ6IHRlbmFudElkLFxyXG4gICAgICAgICAgYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uSWQsXHJcbiAgICAgICAgICB0eXBlOiAnY2FsbCcsXHJcbiAgICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgICAgIGR1ZV9hdDogbmV3IERhdGUobm93LmdldFRpbWUoKSArIDIgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5vdy50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgdXBkYXRlZF9hdDogbm93LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBpZDogJzc3MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMicsXHJcbiAgICAgICAgICB0ZW5hbnRfaWQ6IHRlbmFudElkLFxyXG4gICAgICAgICAgYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uSWQsXHJcbiAgICAgICAgICB0eXBlOiAnZW1haWwnLFxyXG4gICAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgICBkdWVfYXQ6IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyA0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICBjcmVhdGVkX2F0OiBub3cudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5vdy50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaWQ6ICc3NzBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDMnLFxyXG4gICAgICAgICAgdGVuYW50X2lkOiB0ZW5hbnRJZCxcclxuICAgICAgICAgIGFwcGxpY2F0aW9uX2lkOiBhcHBsaWNhdGlvbklkLFxyXG4gICAgICAgICAgdHlwZTogJ3JldmlldycsXHJcbiAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxyXG4gICAgICAgICAgZHVlX2F0OiBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gMSAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDEgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5vdy50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF07XHJcblxyXG4gICAgICBjb25zdCB7IGVycm9yOiB0YXNrc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCd0YXNrcycpLmluc2VydChjb3JyZWN0ZWRUYXNrcyk7XHJcbiAgICAgIGlmICh0YXNrc0Vycm9yKSB0aHJvdyB0YXNrc0Vycm9yO1xyXG5cclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBtZXNzYWdlOiAnRGF0YWJhc2UgdGVzdCBkYXRhIGNvcnJlY3RlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICAgIHN0YXR1czogJ3JlYWR5JyxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5zZXJ0IGxlYWRcclxuICAgIGNvbnN0IHsgZXJyb3I6IGxlYWRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnbGVhZHMnKS5pbnNlcnQoe1xyXG4gICAgICBpZDogbGVhZElkLFxyXG4gICAgICB0ZW5hbnRfaWQ6IHRlbmFudElkLFxyXG4gICAgICBvd25lcl9pZDogb3duZXJJZCxcclxuICAgICAgdGVhbV9pZDogJzU1MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMycsXHJcbiAgICAgIG5hbWU6ICdKb2huIFNtaXRoJyxcclxuICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyxcclxuICAgICAgcGhvbmU6ICcrMS01NTUtMTIzLTQ1NjcnLFxyXG4gICAgICBzdGFnZTogJ3F1YWxpZmllZCcsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAobGVhZEVycm9yKSB0aHJvdyBsZWFkRXJyb3I7XHJcblxyXG4gICAgLy8gSW5zZXJ0IGFwcGxpY2F0aW9uXHJcbiAgICBjb25zdCB7IGVycm9yOiBhcHBFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnYXBwbGljYXRpb25zJykuaW5zZXJ0KHtcclxuICAgICAgaWQ6IGFwcGxpY2F0aW9uSWQsXHJcbiAgICAgIHRlbmFudF9pZDogdGVuYW50SWQsXHJcbiAgICAgIGxlYWRfaWQ6IGxlYWRJZCxcclxuICAgICAgc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoYXBwRXJyb3IpIHRocm93IGFwcEVycm9yO1xyXG5cclxuICAgIC8vIERlbGV0ZSBleGlzdGluZyB0ZXN0IHRhc2tzIGlmIHRoZXkgZXhpc3QgKGZvciBjbGVhbiByZXNldClcclxuICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ3Rhc2tzJykuZGVsZXRlKCkuZXEoJ2FwcGxpY2F0aW9uX2lkJywgYXBwbGljYXRpb25JZCk7XHJcblxyXG4gICAgLy8gSW5zZXJ0IHRhc2tzXHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgdGFza3MgPSBbXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogJzc3MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMScsXHJcbiAgICAgICAgdGVuYW50X2lkOiB0ZW5hbnRJZCxcclxuICAgICAgICBhcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb25JZCxcclxuICAgICAgICB0eXBlOiAnY2FsbCcsXHJcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXHJcbiAgICAgICAgZHVlX2F0OiBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgMiAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5vdy50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5vdy50b0lTT1N0cmluZygpLFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgaWQ6ICc3NzBlODQwMC1lMjliLTQxZDQtYTcxNi00NDY2NTU0NDAwMDInLFxyXG4gICAgICAgIHRlbmFudF9pZDogdGVuYW50SWQsXHJcbiAgICAgICAgYXBwbGljYXRpb25faWQ6IGFwcGxpY2F0aW9uSWQsXHJcbiAgICAgICAgdHlwZTogJ2VtYWlsJyxcclxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcclxuICAgICAgICBkdWVfYXQ6IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgKyA0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgY3JlYXRlZF9hdDogbm93LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgdXBkYXRlZF9hdDogbm93LnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpZDogJzc3MGU4NDAwLWUyOWItNDFkNC1hNzE2LTQ0NjY1NTQ0MDAwMycsXHJcbiAgICAgICAgdGVuYW50X2lkOiB0ZW5hbnRJZCxcclxuICAgICAgICBhcHBsaWNhdGlvbl9pZDogYXBwbGljYXRpb25JZCxcclxuICAgICAgICB0eXBlOiAncmV2aWV3JyxcclxuICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxyXG4gICAgICAgIGR1ZV9hdDogbmV3IERhdGUobm93LmdldFRpbWUoKSAtIDEgKiA2MCAqIDYwICogMTAwMCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gMSAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5vdy50b0lTT1N0cmluZygpLFxyXG4gICAgICB9LFxyXG4gICAgXTtcclxuXHJcbiAgICBjb25zdCB7IGVycm9yOiB0YXNrc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKCd0YXNrcycpLmluc2VydCh0YXNrcyk7XHJcblxyXG4gICAgaWYgKHRhc2tzRXJyb3IpIHRocm93IHRhc2tzRXJyb3I7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgbWVzc2FnZTogJ0RhdGFiYXNlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseSB3aXRoIHRlc3QgZGF0YScsXHJcbiAgICAgIHN0YXR1czogJ3JlYWR5JyxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGxlYWQ6IGxlYWRJZCxcclxuICAgICAgICBhcHBsaWNhdGlvbjogYXBwbGljYXRpb25JZCxcclxuICAgICAgICB0YXNrczogdGFza3MubGVuZ3RoLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1Rlc3QgZGF0YSBpbnNlcnRpb24gZXJyb3I6JywgZXJyKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGluc2VydCB0ZXN0IGRhdGEnLFxyXG4gICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJob3N0IiwiaGVhZGVycyIsImluY2x1ZGVzIiwic3VwYWJhc2UiLCJkYXRhIiwiZXhpc3RpbmdUYWJsZXMiLCJjaGVja0Vycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwibGVuZ3RoIiwidGFibGVOYW1lcyIsIm1hcCIsInQiLCJ0YWJsZV9uYW1lIiwiaW5zZXJ0VGVzdERhdGEiLCJsZWFkc1RhYmxlU3FsIiwiYXBwbGljYXRpb25zVGFibGVTcWwiLCJ0YXNrc1RhYmxlU3FsIiwic3FsIiwicnBjIiwicXVlcnkiLCJlIiwiZXJyIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJsZWFkSWQiLCJ0ZW5hbnRJZCIsIm93bmVySWQiLCJhcHBsaWNhdGlvbklkIiwiZXhpc3RpbmdMZWFkIiwic2luZ2xlIiwidGFza3MiLCJwZW5kaW5nQ291bnQiLCJmaWx0ZXIiLCJjb21wbGV0ZWRDb3VudCIsImRlbGV0ZUVycm9yIiwiZGVsZXRlIiwibm93IiwiRGF0ZSIsImNvcnJlY3RlZFRhc2tzIiwiaWQiLCJ0ZW5hbnRfaWQiLCJhcHBsaWNhdGlvbl9pZCIsInR5cGUiLCJkdWVfYXQiLCJnZXRUaW1lIiwidG9JU09TdHJpbmciLCJjcmVhdGVkX2F0IiwidXBkYXRlZF9hdCIsInRhc2tzRXJyb3IiLCJpbnNlcnQiLCJsZWFkRXJyb3IiLCJvd25lcl9pZCIsInRlYW1faWQiLCJuYW1lIiwiZW1haWwiLCJwaG9uZSIsInN0YWdlIiwiYXBwRXJyb3IiLCJsZWFkX2lkIiwibGVhZCIsImFwcGxpY2F0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/setup.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csetup.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();